<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_stock_production_lot_eltete_form" model="ir.ui.view">
        <field name="name">stock.production.lot.eltete.form</field>
        <field name="model">stock.production.lot</field>
        <field name="inherit_id" ref="stock.view_production_lot_form"/>
        <field name="arch" type="xml">
        
            <xpath expr="//field[@name='ref']" position="after">
                <field name="type_id"/>
                <field name="referencia_id"/>
                
                <field name="sale_order_id"/>
                <field name="sale_order_line_id"/>
                <field name="cliente_id"/>
                <field name="cliente_ref"/>
                <field name="picking_id"/>
                
                <field name="unidades"/>
                <field name="peso_neto"/>
                <field name="user_peso_bruto"/>
                <field name="fecha_entrada"/>
                <field name="fecha_salida"/>
                <field name="disponible"/>
                <field name="pallet_sage"/>

            </xpath>
            
            
            <xpath expr="//group[@name='main_group']" position="after">
                <group name="lot_operarios">
                    <field name="operario_ids" context="{'default_lot_id': active_id,  }" >
                        <tree string="Operarios" editable="top">
                            <field name='lot_id' invisible="1" />
                            <field name='operario_id' />
			    <field name='tarea' />
                            <field name='fecha_inicio'/>
                            <field name='und_inicio' />
                            <field name='fecha_fin'/>
                            <field name='und_fin' />
                        </tree>
                    </field>   
                </group>
            </xpath>
            

            
        </field>
    </record>
    
    
    <record id="view_stock_production_lot_simple_eltete_form" model="ir.ui.view">
        <field name="name">stock.production.lot.simple.eltete.form</field>
        <field name="model">stock.production.lot</field>
        <field name="inherit_id" ref="stock.view_production_lot_form_simple"/>
        <field name="arch" type="xml">
        
                <xpath expr="//field[@name='ref']" position="after">
                
		    <field name="unidades"/>
                    <field name="sale_order_line_id"/>

                </xpath>
            
                

            
        </field>
    </record>
    
    
    <record id="view_stock_production_lot_eltete_tree" model="ir.ui.view">
        <field name="name">stock.production.lot.eltete.tree</field>
        <field name="model">stock.production.lot</field>
        <field name="inherit_id" ref="stock.view_production_lot_tree"/>
        <field name="arch" type="xml">
        
                <xpath expr="//field[@name='name']" position="after">
			<field name="referencia_id"/>
			<field name="unidades"/>
			<field name="peso_neto"  sum="Peso"/>
			<field name="fecha_entrada"/>
			<field name="fecha_salida"/>
			<field name="picking_id"/>
			<field name="sale_order_id"/>
			<field name="sale_order_line_id"/>
			<field name="cliente_id"/>
			<field name="disponible"/>
                </xpath>
                
				
				<field name="ref" position="attributes">
                    <attribute name="invisible">1</attribute>
                </field>
				
				<field name="product_id" position="attributes">
                    <attribute name="invisible">1</attribute>
                </field>
				
				<field name="create_date" position="attributes">
                    <attribute name="invisible">1</attribute>
                </field>
				 

		

        </field>
    </record>
    
    
    
    
    <!-- NUEVAS VISTAS -->
    <record model="ir.ui.view" id="view_stock_production_lot_eltete_nuevo_form">
        <field name="name">stock.production.lot.eltete.nuevo.form</field>
        <field name="model">stock.production.lot</field>
        <field name="arch" type="xml">
            <form string="Ofertas">
                
                <sheet>
                    <group>
                        <field name="name" />
                        
                        <field name="type_id" domain="[('product_type','=',True)]" options="{'no_create': True, 'no_create_edit':True}"  />
                        <field name="is_cantonera" invisible="1"/>
                        <field name="is_perfilu" invisible="1"/>
                        <field name="is_slipsheet" invisible="1"/>
                        <field name="is_solidboard" invisible="1"/>
                        <field name="is_formato" invisible="1"/>
                        <field name="is_bobina" invisible="1"/>
                        <field name="is_pieballet" invisible="1"/>
                        <field name="is_flatboard" invisible="1"/>
                        <field name="is_varios" invisible="1"/>
                        
                        <field name="product_id" />
                    </group>
                    
                    <h3>Referencia</h3>
                    <group>
                        <field name='pie'  attrs="{'invisible': [('is_pieballet', '=', False)]}"/>
                        <field name='ala_1' attrs="{'invisible': [('is_cantonera', '=', False),('is_perfilu', '=', False),('is_slipsheet', '=', False),]}"/>
                        <field name='ancho' attrs="{'invisible': ['|',('is_cantonera', '=', True),('is_pieballet', '=', True),]}"/>
                        <field name='ala_2' attrs="{'invisible': [('is_cantonera', '=', False),('is_perfilu', '=', False),('is_slipsheet', '=', False),]}"/>
                        <field name='grosor_2' attrs="{'invisible': [('is_cantonera', '=', False),('is_perfilu', '=', False),]}" />
                        <field name='ala_3' attrs="{'invisible': [('is_slipsheet', '=', False)]}"/>
                        <field name='longitud' attrs="{'invisible': [('is_bobina', '=', True)]}"/>
                        <field name='grosor_1' attrs="{'invisible': [('is_slipsheet', '=', False),('is_solidboard', '=', False),('is_flatboard', '=', False),]}" />
                        <field name='ala_4' attrs="{'invisible': [('is_slipsheet', '=', False)]}"/>
                        <field name='diametro'  attrs="{'invisible': [('is_bobina', '=', False)]}"/>
                        <field name='gramaje' attrs="{'invisible': [('is_formato', '=', False),('is_bobina', '=', False),]}"/>	
                        <field name='tipo_varios_id'  attrs="{'invisible': [('is_varios', '=', False)]}"/>
                    </group>
                    

                   
                    <group>
                        <button name="crear_sin_pedido" type="object" string="Crear sin pedido" />
                    </group>
			
		    <group>
			    <field name="unidades"/>
			    <field name="user_peso_bruto"/>
			    <field name="fecha_entrada"/>
		    </group>

                </sheet>
            </form>
        </field>
    </record>
    
    
    <record model="ir.actions.act_window" id="action_stock_production_lot_eltete_nuevo">
        <field name="name">Alta de lotes</field>
        <field name="res_model">stock.production.lot</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
    </record>

    <menuitem name="Alta de lotes" parent="sale.product_menu_catalog" id="menu_stock_production_lot_eltete_nuevo" action="action_stock_production_lot_eltete_nuevo" sequence="105"/>
    
    
    
    <!-- #######################################################
                 stock.production.lot.operario
        ######################################################## -->
    
    
        <record model="ir.ui.view" id="view_stock_production_lot_operario_tree">
            <field name="name">stock.production.lot.operario.tree</field>
            <field name="model">stock.production.lot.operario</field>
            <field name="priority" eval="16"/>
            <field name="arch" type="xml">
                <tree string="Producto">
                    <field name='lot_id' />
                    <field name='operario_id' />
                    <field name='tarea' />
                    <field name='fecha_inicio' />
                    <field name='und_inicio' />
                    <field name='fecha_fin' />
                    <field name='und_fin' />
		    <field name='metros' />
		    <field name='kilos' />
                </tree>
            </field>
        </record>
        
        
        <record model="ir.ui.view" id="view_stock_production_lot_operario_form">
            <field name="name">stock.production.lot.operario.form</field>
            <field name="model">stock.production.lot.operario</field>
            <field name="arch" type="xml">
                <form string="Color">
                    <sheet>
                        <group>
                            <field name='lot_id' />
                            <field name='operario_id' />
                            <field name='tarea' />
                            <field name='fecha_inicio' />
                            <field name='und_inicio' />
                            <field name='fecha_fin' />
                            <field name='und_fin' />
			    <field name='metros' />
		            <field name='kilos' />
                        </group>
                        
                    </sheet>
                </form>
            </field>
        </record>
        
        
        <record model="ir.ui.view" id="view_stock_production_lot_operario_search">
            <field name="name">stock.production.lot.operario.search</field>
            <field name="model">stock.production.lot.operario</field>
            <field name="arch" type="xml">
                <search string="Color">
                    <field name='lot_id' />
                    <field name='operario_id' />
                    <field name='tarea' />
                    <field name='fecha_inicio' />
                    <field name='und_inicio' />
                    <field name='fecha_fin' />
                    <field name='und_fin' />
		    <field name='metros' />
		    <field name='kilos' />
                    
                    <group expand="0" string="Agrupar por">
                        <filter name="group_by_lot_id" string="Lote" domain="[]" context="{'group_by':'lot_id'}"/>
                        <filter name="group_by_operario_id" string="Operario" domain="[]" context="{'group_by':'operario_id'}"/>
                    </group>
                </search>
            </field>
        </record>

				
        <record model="ir.actions.act_window" id="action_stock_production_lot_operario">
            <field name="name">Operarios lotes</field>
            <field name="res_model">stock.production.lot.operario</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
        
        
        <menuitem name="Operarios lotes" parent="stock.menu_stock_inventory_control" id="menu_stock_production_lot_operario" action="action_stock_production_lot_operario" sequence="999"/>
    
    
    
</odoo>
